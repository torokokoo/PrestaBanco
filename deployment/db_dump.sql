--
-- PostgreSQL database dump
--

-- Dumped from database version 17.0 (Postgres.app)
-- Dumped by pg_dump version 17.0 (Postgres.app)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: document; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.document (
    document_id bigint NOT NULL,
    description character varying(255),
    name character varying(255)
);


ALTER TABLE public.document OWNER TO postgres;

--
-- Name: document_document_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.document ALTER COLUMN document_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.document_document_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: loan; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.loan (
    loan_id bigint NOT NULL,
    address character varying(255),
    balance integer NOT NULL,
    birthdate timestamp(6) without time zone,
    created_at timestamp(6) without time zone,
    email character varying(255),
    name character varying(255),
    requested_funding real,
    requested_rate integer,
    requested_term integer,
    rut character varying(255),
    updated_at timestamp(6) without time zone,
    loan_type_id bigint,
    status_id bigint
);


ALTER TABLE public.loan OWNER TO postgres;

--
-- Name: loan_document; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.loan_document (
    loan_document_id bigint NOT NULL,
    file character varying(255),
    verified boolean NOT NULL,
    document_id bigint,
    loan_id bigint
);


ALTER TABLE public.loan_document OWNER TO postgres;

--
-- Name: loan_document_loan_document_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.loan_document ALTER COLUMN loan_document_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.loan_document_loan_document_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: loan_loan_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.loan ALTER COLUMN loan_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.loan_loan_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: loan_type; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.loan_type (
    loan_type_id bigint NOT NULL,
    max_funding real,
    max_rate real,
    max_term real,
    min_rate real,
    name character varying(255)
);


ALTER TABLE public.loan_type OWNER TO postgres;

--
-- Name: loan_type_loan_type_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.loan_type ALTER COLUMN loan_type_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.loan_type_loan_type_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: loan_type_requierement; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.loan_type_requierement (
    loan_type_requierement_id bigint NOT NULL,
    active boolean NOT NULL,
    document_id bigint,
    loan_type_id bigint
);


ALTER TABLE public.loan_type_requierement OWNER TO postgres;

--
-- Name: loan_type_requierement_loan_type_requierement_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.loan_type_requierement ALTER COLUMN loan_type_requierement_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.loan_type_requierement_loan_type_requierement_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: status; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.status (
    status_id bigint NOT NULL,
    active boolean NOT NULL,
    name character varying(255),
    description text
);


ALTER TABLE public.status OWNER TO postgres;

--
-- Name: status_status_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.status ALTER COLUMN status_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.status_status_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Data for Name: document; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.document (document_id, description, name) FROM stdin;
1	Con este documento calcularemos la relacion de la cuota/ingreso que no puede ser mayor a 35%	Comprobante de Ingresos
2	Con este documento comprobaremos en cuanto esta avaluada la propiedad y revisaremos si el financiemiento esta dentro de los margenes establecidos	Certificado de avaluo
3	Se revisa si cuenta con morosidades graves o alta cantidad de deudas pendientes	Historial crediticio
4	Escritura ante notario de la primera vivienda, para postular a otros creditos	Escritura de la primera vivienda
5	Relacion de ingresos/egresos del negocio	Estado financiero del negocio
6	Como se proyecta a futuro	Plan de negocios
7	Certificado de un contratista mostrando el presupuesto de las remodelaciones	Presupuesto de la remodelacion
8	Para poder validar que el cliente cuenta con la estabilidad laboral necesaria	Certificado de antiguedad laboral
9	Para poder confirmar la fecha del solicitante	Acta de nacimiento
\.


--
-- Data for Name: loan; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.loan (loan_id, address, balance, birthdate, created_at, email, name, requested_funding, requested_rate, requested_term, rut, updated_at, loan_type_id, status_id) FROM stdin;
16	Av Siempreviva	2	2024-10-09 20:08:56	1969-12-31 21:00:00	correo@correo.com	Prueba	100	0	10	1-9	1969-12-31 21:00:00	1	1
15	Av Siempreviva	2	2024-10-09 20:08:56	1969-12-31 21:00:00	correo@correo.com	Prueba	100	0	10	1-9	1969-12-31 21:00:00	1	2
17	3dad	312	2024-10-09 20:08:56	2024-11-04 04:00:40.511	adsasd	Diego	50	0	0	1-9	2024-11-04 04:00:40.511	2	1
18	direccion	1023123	2024-10-09 20:08:56	2024-11-04 11:45:03.508	correo	Patricia	0	0	25	10150973-7	2024-11-04 11:45:03.508	1	1
19	direccion	1831928312	2024-10-09 20:08:56	2024-11-04 11:49:22.038	correo	Nelson	0.5	0	25	89674859	2024-11-04 11:49:22.038	1	6
\.


--
-- Data for Name: loan_document; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.loan_document (loan_document_id, file, verified, document_id, loan_id) FROM stdin;
\.


--
-- Data for Name: loan_type; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.loan_type (loan_type_id, max_funding, max_rate, max_term, min_rate, name) FROM stdin;
1	0.8	0.05	30	0.035	Primera vivienda
2	0.7	0.06	20	0.04	Segunda vivienda
3	0.6	0.07	25	0.05	Propiedades comerciales
4	0.5	0.06	15	0.045	Remodelación
\.


--
-- Data for Name: loan_type_requierement; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.loan_type_requierement (loan_type_requierement_id, active, document_id, loan_type_id) FROM stdin;
1	t	1	1
2	t	1	2
3	t	1	3
4	t	1	4
5	t	2	1
6	t	2	2
7	t	2	3
8	t	2	4
9	t	3	1
10	t	3	2
11	t	4	2
12	t	5	3
13	t	6	3
14	t	7	4
15	t	8	1
16	t	8	2
17	t	8	3
18	t	8	4
19	t	9	1
20	t	9	2
21	t	9	3
22	t	9	4
\.


--
-- Data for Name: status; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.status (status_id, active, name, description) FROM stdin;
1	t	En Revisión Inicial	La solicitud ha sido recibida y está en proceso de verificación\npreliminar.
2	t	Pendiente de Documentación	La solicitud está en espera porque falta uno o más\ndocumentos importantes o se requiere información adicional del cliente
3	t	En Evaluación	La solicitud ha pasado la revisión inicial y está siendo evaluada por\nun ejecutivo. En esta etapa, el ejecutivo realiza las diferentes evaluaciones según las\nreglas establecidas
4	t	Pre-Aprobada	La solicitud ha sido evaluada y cumple con los criterios básicos del\nbanco, por lo que ha sido pre-aprobada
6	t	Aprobada	La solicitud ha sido aprobada y está lista para el desembolso
7	t	Rechazada	La solicitud ha sido evaluada y, tras el análisis, no cumple con los\ncriterios establecidos por el banco
9	t	Cancelada por el Cliente	El cliente ha decidido cancelar la solicitud antes de que\nesta sea aprobada
8	t	En Desembolso	La solicitud ha sido aprobada y se está ejecutando el proceso de\ndesembolso del monto aprobado
5	t	En Aprobación Final	El cliente ha aceptado las condiciones propuestas, y la solicitud se encuentra en proceso de aprobación final
\.


--
-- Name: document_document_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.document_document_id_seq', 1, false);


--
-- Name: loan_document_loan_document_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.loan_document_loan_document_id_seq', 1, false);


--
-- Name: loan_loan_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.loan_loan_id_seq', 19, true);


--
-- Name: loan_type_loan_type_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.loan_type_loan_type_id_seq', 1, false);


--
-- Name: loan_type_requierement_loan_type_requierement_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.loan_type_requierement_loan_type_requierement_id_seq', 1, false);


--
-- Name: status_status_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.status_status_id_seq', 7, true);


--
-- Name: document document_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.document
    ADD CONSTRAINT document_pkey PRIMARY KEY (document_id);


--
-- Name: loan_document loan_document_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.loan_document
    ADD CONSTRAINT loan_document_pkey PRIMARY KEY (loan_document_id);


--
-- Name: loan loan_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.loan
    ADD CONSTRAINT loan_pkey PRIMARY KEY (loan_id);


--
-- Name: loan_type loan_type_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.loan_type
    ADD CONSTRAINT loan_type_pkey PRIMARY KEY (loan_type_id);


--
-- Name: loan_type_requierement loan_type_requierement_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.loan_type_requierement
    ADD CONSTRAINT loan_type_requierement_pkey PRIMARY KEY (loan_type_requierement_id);


--
-- Name: status status_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.status
    ADD CONSTRAINT status_pkey PRIMARY KEY (status_id);


--
-- Name: loan_document fk6dwcyrs1q2fopiwtfn45yrgwo; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.loan_document
    ADD CONSTRAINT fk6dwcyrs1q2fopiwtfn45yrgwo FOREIGN KEY (loan_id) REFERENCES public.loan(loan_id);


--
-- Name: loan fkbexswenhcb4thdjscckbhfc6u; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.loan
    ADD CONSTRAINT fkbexswenhcb4thdjscckbhfc6u FOREIGN KEY (status_id) REFERENCES public.status(status_id);


--
-- Name: loan_document fkbqyy3iym5g255qbg9y16o4c0v; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.loan_document
    ADD CONSTRAINT fkbqyy3iym5g255qbg9y16o4c0v FOREIGN KEY (document_id) REFERENCES public.document(document_id);


--
-- Name: loan_type_requierement fkkt23n2s8ma22pobbhn40jm7sf; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.loan_type_requierement
    ADD CONSTRAINT fkkt23n2s8ma22pobbhn40jm7sf FOREIGN KEY (document_id) REFERENCES public.document(document_id);


--
-- Name: loan fkkx2hqvulcu3hai1h3yakvmnfm; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.loan
    ADD CONSTRAINT fkkx2hqvulcu3hai1h3yakvmnfm FOREIGN KEY (loan_type_id) REFERENCES public.loan_type(loan_type_id);


--
-- Name: loan_type_requierement fkqndjc3gkkfvomqfhtnrgsr7ml; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.loan_type_requierement
    ADD CONSTRAINT fkqndjc3gkkfvomqfhtnrgsr7ml FOREIGN KEY (loan_type_id) REFERENCES public.loan_type(loan_type_id);


--
-- PostgreSQL database dump complete
--

